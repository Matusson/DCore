<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Creating Bot Manager </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Creating Bot Manager ">
    <meta name="generator" content="docfx 2.58.0.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="creating-bot-manager">Creating Bot Manager</h1>

<p>The first step in using DCore is creating a BotManager. The BotManager, as name implies, is a class that manages loading account information, distributing it, and also contains various utility functions if you need to use multiple accounts in your software.
The recommended way to do it is:</p>
<pre><code class="lang-cs">BotManager manager = new BotManager(x =&gt; {
	x.UseMultipleBots = false;
    });
</code></pre>
<p>You can use the lambda expression to assign config values. This also allows you to specify the config extension Type, which will be described in a separate guide.
Note that this approach does not use Dependency Injection. This is because if you wish to use DI, you will probably also want DiscordSocketClient in your DI Container, which will be created later.</p>
<h1 id="loading-bot-information">Loading bot information</h1>
<p>To manage any bots with BotManager, you first need to load token information into it. There are multiple ways to do it.
For most use cases, you should only use one bot account. In that case, you can simply use:</p>
<pre><code class="lang-cs">ulong botId = 12345678;
string botToken = &quot;VALIDTOKEN&quot;;
botManager.LoadAccount(botId, botToken);
</code></pre>
<p>In case you need multiple accounts, the simplest way is to store that information in a file, in which every line consists of the bot ID and a token, separated by a space. You can load that information like this:</p>
<pre><code class="lang-cs">string path = &quot;accounts.txt&quot;;
botManager.LoadAccountsFromFile(path);
</code></pre>
<p>Alternatively, if you wish to load the accounts in another way, you can manually create and load a list of TokenInfo structs:</p>
<pre><code class="lang-cs">//Add any account information you need to this list
List&lt;TokenInfo&gt; accounts = new();
botManager.LoadAccounts(accounts);
</code></pre>
<h1 id="requesting-accounts">Requesting accounts</h1>
<p>The last thing you will need to do is request the bot accounts from the bot manager:</p>
<pre><code class="lang-cs">int requestedBotCount = 1;
var activatedBots = botManager.RequestBots(requestedBotCount);
</code></pre>
<p>This will take the selected number of unused accounts and return them as objects.</p>
<div class="NOTE">
<h5>Note</h5>
<p>By default, bots will automatically start up after being requested. You can change this behaviour via DCore config.</p>
</div>
<h1 id="dependency-injection">Dependency Injection</h1>
<p>If you wish to use Dependency Injection, you can register DCore services with BotManager.AddDCoreServices(IServiceCollection):</p>
<pre><code class="lang-cs">botManager.AddDCoreServices(serviceContainer);
</code></pre>
<p>It's recommended that you do this after requesting the bot. This will always add DCoreConfig and the BotManager, but if a bot has been requested, this will also add DiscordBot and its services (DiscordSocketClient, DCoreLogger, BotConfig, LanguageManager) to the DI container.
Also note that if you set UseMultipleBots to true in DCoreConfig, this will not add the bots or their services to the DI container.</p>
<h1 id="fetching-bots-from-botmanager">Fetching bots from BotManager</h1>
<p>BotManager.RequestBots() will return a list of bots activated  by that action. Once bots have been activated via RequestBots(), there are other ways to fetch these bots from BotManager.
You can use BotManager.GetAllBots() to fetch all currently activated bots:</p>
<pre><code class="lang-cs">//This list will contain the list of all bot accounts.
List&lt;DiscordBot&gt; bots = botManager.GetAllBots();
</code></pre>
<p>or you can use GetBot() to fetch only the bot with the specified ID or TokenInfo:</p>
<pre><code class="lang-cs">//This will be the bot with this ID
ulong botId = 12345678;
DiscordBot bot = botManager.GetBot(botId);
</code></pre>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/Matusson/DCore/blob/master/docs/articles/quickstart.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <div class="toggle-mode">
                <div class="icon">
                  <i aria-hidden="true">☀</i>
                </div>
                <label class="switch">
                  <input type="checkbox" id="switch-style">
                  <span class="slider round"></span>
                </label>
                <div class="icon">
                  <i aria-hidden="true">☾</i>
                </div>
                <script type="text/javascript" src="../styles/toggle-theme.js"></script>
              </div>
          
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
